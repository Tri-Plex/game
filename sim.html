<!DOCTYPE html>
<title>temp</title>
<html lang="en">

<head>
    
    
	<meta charset="utf-8" />
	<p>\/ :O Look there is stuff here! :D \/</p>
    <h1 id = "vars"></h1>
    <h1 id = 'test'></h1>
	<style>
		* {
			padding: 0;
			margin: 0;
		}

		canvas {
			background: #eee;
			display: block;
			margin: 0 auto;
		}
	</style>
</head>

<div style="display:none;">
</div>

<body>
	<h1 id="coords"></h1>
	<p id="log"></p>
	<canvas id="myCanvas" width="1080" height="980"></canvas>
    
	<script>
        let scale = 5;
        let delay = 0;
        let selectobj = 0;
        var dx = 0;
        var dy = 0;
        var pressedKeys = {};
        var canvas = document.getElementById("myCanvas");
		var ctx = canvas.getContext("2d");
		canvas.height = window.innerHeight;
		canvas.width = window.innerWidth;
        //mass[0],x[1],y[2],force[3],forceangle[4],vel[5],velangle[6],frictionk[7],frictions[8],touch[9]
        var obj = [[5, 0, canvas.height-(5/5*scale)-5, 0, 90*(Math.PI/180), 10*scale,60*Math.PI/180,0.5,0.7,false]];
        
        const rate = 0.005

        //var mass = 5;
        //let size = mass/5*scale;
        //var x =0;
        //var y = canvas.height-size-5;
      
        
        var g = -9.8*scale;
        
        //var force = 0;
        //let forceangle =90*(Math.PI/180);
        //let forcex = force*Math.cos(forceangle);
        //let forcey = force*Math.sin(forceangle)+(mass*g);
        
        //var angle = 60*(Math.PI/180);
        //var vel = 100*scale;
        //var velx = vel*Math.cos(angle);
        //var vely = vel*Math.sin(angle);
        
        var bounce = 0.5;
        let t=0;
        //let frictionk = 2000000;
        //let frictions = 0.7;
        //let touch = false;
        
        
        function draw(){
            keyLogic();
            
            
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            
            for(let i = 0; i<obj.length;i++){
             update(i);   
            }
            
               
        }
        
        
        function update(i){
            
     
		
        let mass = obj[i][0];
        let size = mass/5*scale;
        var x =obj[i][1];
        var y = obj[i][2];
        
        let force = obj[i][3];
        let forceangle =obj[i][4];
        let forcex = force*Math.cos(forceangle);
        let forcey = force*Math.sin(forceangle)+(mass*g);
        
        let angle = obj[i][6];
        let vel = obj[i][5];
        let velx = vel*Math.cos(angle);
        var vely = vel*Math.sin(angle);
        
        let frictionk = obj[i][7];
        let frictions = obj[i][8];
        let touch = obj[i][9];
            
            ctx.font = "10px Arial";
            ctx.fillText("Diplacement X= "+Math.round((x-3)/scale)+"m", 10, 50);
            ctx.font = "10px Arial";
            ctx.fillText("Diplacement Y= "+Math.round(-1*(y-canvas.height)/scale) + "m", 10, 60);
            ctx.fillText("Vel: "+Math.round((vel)/scale)+"m/s", 10, 70);
            ctx.fillText("Velx: "+Math.round((velx)/scale)+"m/s", 10, 80);
            ctx.fillText("Vely: "+Math.round((vely)/scale)+"m/s", 10, 90);
            ctx.fillText("angle: "+Math.round(angle*180/Math.PI)+" degrees", 10, 100);
        
            ctx.beginPath();
            ctx.lineWidth = 2;
            ctx.moveTo(x+(size/2),y+(size/2));
            ctx.lineTo(x+size/2+(forcex),y+(size/2));
            
            ctx.fillStyle = "green";
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
            
            ctx.beginPath();
            ctx.moveTo(x+(size/2),y+(size/2));
            ctx.lineTo(x+size/2,y-(forcey)+(size/2));
            
            ctx.fillStyle = "green";
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
            
            
            ctx.beginPath();
            ctx.moveTo(x+(size/2),y+(size/2));
            ctx.lineWidth = 1;
            ctx.lineTo(x+size/2+forcex+(force*Math.cos  (forceangle)),y-(force*Math.sin(forceangle))+(size/2));
            
            ctx.fillStyle = "green";
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
                
            ctx.beginPath();
            ctx.rect(x,y,size,size);
            ctx.fillStyle = "red";
			ctx.fill();
            ctx.stroke();
            ctx.closePath();
            
            forcex=force*Math.cos(forceangle);
            velx=velx+(forcex/mass)*rate;
            
            if (y+size>=canvas.height && ((force*Math.sin(forceangle)+(mass*g)<0) || vely<0)){
                
                forcey=force*Math.sin(forceangle)+(mass*g);
                
                //if(y-((forcey/mass)*0.05)+size>=canvas.height){
                y=canvas.height-size;
                    vely=0;
                //}
                //else{
                        //y=y-(vely*0.05);
                    //vely = vely + (forcey/mass)*0.05;
                //}
                if(velx!=0/*Math.abs(velx)>0.5*scale*/){
                
                forcex = (force*Math.cos(forceangle))+((velx/Math.abs(velx)*-1)*frictionk*mass*(g*-1));
                    if(0>Math.abs(velx)-Math.abs(forcex/mass*rate)){
                     velx=0   
                    }
                    else{
                    velx=velx+(forcex/mass)*rate;
                    }
                    
                }
                
                else{
                    
                    if(Math.abs(force*Math.cos(forceangle))<Math.abs(frictions*mass*g)){
                        forcex=0;
                        velx=0
                    }
                }
                
                touch = true;
            }
            else{
                forcey = force*Math.sin(forceangle)+(mass*g);
                y=y-(vely*rate);
                touch = false;
            
            vely = vely + (forcey/mass)*rate;
            }
            
            
            x = x+(velx*rate);
            
            vel=Math.sqrt(Math.pow(velx,2)+Math.pow(vely,2));
            angle = Math.cos(velx/vel);
            if(vely<0){
                angle *=-1;
            }
            //mass[0],x[1],y[2],force[3],forceangle[4],vel[5],angle[6],frictionk[7],frictions[8],touch[9]
            obj[i][0]=mass;
            obj[i][1]=x;
            obj[i][2]=y;
            obj[i][3]=force;
            obj[i][4]=forceangle;
            obj[i][5]=vel;
            obj[i][6]=angle;
            obj[i][7]=frictionk;
            obj[i][8]=frictions;
            obj[i][9]=touch;
        }
        
        function keyLogic() {
            delay-=1;
			if (pressedKeys["KeyW"]) {
				obj[selectobj][3]+=1;
                }
            if (pressedKeys["KeyS"]) {
				obj[selectobj][3]-=1;
                }   
            if (pressedKeys["KeyA"]) {
				obj[selectobj][4]+=0.01;
                }
            
            if (pressedKeys["KeyD"]) {
				obj[selectobj][4]-=0.01;
                }
            if(pressedKeys["KeyX"]){
                obj[selectobj][3]= 0;
                obj[selectobj][4]=0;
            }
            if(pressedKeys["KeyE"]){
                x=canvas.width/2;
            }
            if(pressedKeys["Key1"]){
             selectobj=0;   
            }
        }
        window.onkeyup = function(e) { pressedKeys[e.code] = false; }
		window.onkeydown = function(e) { pressedKeys[e.code] = true; }
        
        setInterval(draw, 5);
    </script>